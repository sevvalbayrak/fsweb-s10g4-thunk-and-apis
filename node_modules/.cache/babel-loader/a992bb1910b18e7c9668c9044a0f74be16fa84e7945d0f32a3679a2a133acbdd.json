{"ast":null,"code":"import { FAV_ADD, FAV_REMOVE, FETCH_SUCCESS, FETCH_LOADING, FETCH_ERROR, GET_FAVS_FROM_LS, RESET_LOCAL } from \"./actions\";\nimport { toast } from \"react-toastify\";\nconst initial = {\n  favs: [],\n  current: null,\n  error: null,\n  loading: false\n};\nfunction writeFavsToLocalStorage(state) {\n  localStorage.setItem(\"s10g4\", JSON.stringify(state.favs));\n}\nfunction readFavsFromLocalStorage() {\n  return JSON.parse(localStorage.getItem(\"s10g4\"));\n}\nexport function myReducer() {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initial;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case FAV_ADD:\n      if (state.favs.find(fav => fav.id === action.payload.id)) {\n        //state.favs.includes(action.payload))\n        return state;\n      } else {\n        let newFav = {\n          ...state,\n          favs: [...state.favs, action.payload]\n        };\n        writeFavsToLocalStorage(newFav);\n        toast.success(\"Favorilere eklendi\");\n        return newFav;\n      }\n    case FAV_REMOVE:\n      let removedList = {\n        ...state,\n        favs: state.favs.filter(fav => fav.id !== action.payload)\n      };\n      writeFavsToLocalStorage(removedList);\n      toast.warning(\"Favorilerden çıkarıldı\");\n      return removedList;\n    case RESET_LOCAL:\n      let resetFav = {\n        ...state,\n        favs: []\n      };\n      writeFavsToLocalStorage(resetFav);\n      return resetFav;\n    case FETCH_SUCCESS:\n      return {\n        ...state,\n        loading: false,\n        current: action.payload\n      };\n    case FETCH_LOADING:\n      return {\n        ...state,\n        loading: true,\n        current: null\n      };\n    case FETCH_ERROR:\n      toast.error(action.payload);\n      return {\n        ...state,\n        loading: false,\n        error: action.id,\n        current: null\n      };\n    case GET_FAVS_FROM_LS:\n      return {\n        ...state,\n        favs: readFavsFromLocalStorage() || []\n      };\n    default:\n      return state;\n  }\n}","map":{"version":3,"names":["FAV_ADD","FAV_REMOVE","FETCH_SUCCESS","FETCH_LOADING","FETCH_ERROR","GET_FAVS_FROM_LS","RESET_LOCAL","toast","initial","favs","current","error","loading","writeFavsToLocalStorage","state","localStorage","setItem","JSON","stringify","readFavsFromLocalStorage","parse","getItem","myReducer","arguments","length","undefined","action","type","find","fav","id","payload","newFav","success","removedList","filter","warning","resetFav"],"sources":["C:/Users/valenrach/fsweb-s10g4-thunk-and-apis/src/reducers.js"],"sourcesContent":["import {\r\n  FAV_ADD,\r\n  FAV_REMOVE,\r\n  FETCH_SUCCESS,\r\n  FETCH_LOADING,\r\n  FETCH_ERROR,\r\n  GET_FAVS_FROM_LS,\r\n  RESET_LOCAL,\r\n} from \"./actions\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nconst initial = {\r\n  favs: [],\r\n  current: null,\r\n  error: null,\r\n  loading: false,\r\n};\r\n\r\nfunction writeFavsToLocalStorage(state) {\r\n  localStorage.setItem(\"s10g4\", JSON.stringify(state.favs));\r\n}\r\n\r\nfunction readFavsFromLocalStorage() {\r\n  return JSON.parse(localStorage.getItem(\"s10g4\"));\r\n}\r\n\r\nexport function myReducer(state = initial, action) {\r\n  switch (action.type) {\r\n    case FAV_ADD:\r\n      if (state.favs.find((fav) => fav.id === action.payload.id)) {\r\n        //state.favs.includes(action.payload))\r\n        return state;\r\n      } else {\r\n        let newFav = {\r\n          ...state,\r\n          favs: [...state.favs, action.payload],\r\n        };\r\n        writeFavsToLocalStorage(newFav);\r\n        toast.success(\"Favorilere eklendi\");\r\n        return newFav;\r\n      }\r\n\r\n    case FAV_REMOVE:\r\n      let removedList = {\r\n        ...state,\r\n        favs: state.favs.filter((fav) => fav.id !== action.payload),\r\n      };\r\n      writeFavsToLocalStorage(removedList);\r\n      toast.warning(\"Favorilerden çıkarıldı\");\r\n      return removedList;\r\n\r\n    case RESET_LOCAL:\r\n      let resetFav = {\r\n        ...state,\r\n        favs: [],\r\n      };\r\n      writeFavsToLocalStorage(resetFav);\r\n      return resetFav;\r\n\r\n    case FETCH_SUCCESS:\r\n      return { ...state, loading: false, current: action.payload };\r\n\r\n    case FETCH_LOADING:\r\n      return { ...state, loading: true, current: null };\r\n\r\n    case FETCH_ERROR:\r\n      toast.error(action.payload);\r\n      return { ...state, loading: false, error: action.id, current: null };\r\n\r\n    case GET_FAVS_FROM_LS:\r\n      return {\r\n        ...state,\r\n        favs: readFavsFromLocalStorage() || [],\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n"],"mappings":"AAAA,SACEA,OAAO,EACPC,UAAU,EACVC,aAAa,EACbC,aAAa,EACbC,WAAW,EACXC,gBAAgB,EAChBC,WAAW,QACN,WAAW;AAClB,SAASC,KAAK,QAAQ,gBAAgB;AAEtC,MAAMC,OAAO,GAAG;EACdC,IAAI,EAAE,EAAE;EACRC,OAAO,EAAE,IAAI;EACbC,KAAK,EAAE,IAAI;EACXC,OAAO,EAAE;AACX,CAAC;AAED,SAASC,uBAAuBA,CAACC,KAAK,EAAE;EACtCC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEC,IAAI,CAACC,SAAS,CAACJ,KAAK,CAACL,IAAI,CAAC,CAAC;AAC3D;AAEA,SAASU,wBAAwBA,CAAA,EAAG;EAClC,OAAOF,IAAI,CAACG,KAAK,CAACL,YAAY,CAACM,OAAO,CAAC,OAAO,CAAC,CAAC;AAClD;AAEA,OAAO,SAASC,SAASA,CAAA,EAA0B;EAAA,IAAzBR,KAAK,GAAAS,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAGf,OAAO;EAAA,IAAEkB,MAAM,GAAAH,SAAA,CAAAC,MAAA,OAAAD,SAAA,MAAAE,SAAA;EAC/C,QAAQC,MAAM,CAACC,IAAI;IACjB,KAAK3B,OAAO;MACV,IAAIc,KAAK,CAACL,IAAI,CAACmB,IAAI,CAAEC,GAAG,IAAKA,GAAG,CAACC,EAAE,KAAKJ,MAAM,CAACK,OAAO,CAACD,EAAE,CAAC,EAAE;QAC1D;QACA,OAAOhB,KAAK;MACd,CAAC,MAAM;QACL,IAAIkB,MAAM,GAAG;UACX,GAAGlB,KAAK;UACRL,IAAI,EAAE,CAAC,GAAGK,KAAK,CAACL,IAAI,EAAEiB,MAAM,CAACK,OAAO;QACtC,CAAC;QACDlB,uBAAuB,CAACmB,MAAM,CAAC;QAC/BzB,KAAK,CAAC0B,OAAO,CAAC,oBAAoB,CAAC;QACnC,OAAOD,MAAM;MACf;IAEF,KAAK/B,UAAU;MACb,IAAIiC,WAAW,GAAG;QAChB,GAAGpB,KAAK;QACRL,IAAI,EAAEK,KAAK,CAACL,IAAI,CAAC0B,MAAM,CAAEN,GAAG,IAAKA,GAAG,CAACC,EAAE,KAAKJ,MAAM,CAACK,OAAO;MAC5D,CAAC;MACDlB,uBAAuB,CAACqB,WAAW,CAAC;MACpC3B,KAAK,CAAC6B,OAAO,CAAC,wBAAwB,CAAC;MACvC,OAAOF,WAAW;IAEpB,KAAK5B,WAAW;MACd,IAAI+B,QAAQ,GAAG;QACb,GAAGvB,KAAK;QACRL,IAAI,EAAE;MACR,CAAC;MACDI,uBAAuB,CAACwB,QAAQ,CAAC;MACjC,OAAOA,QAAQ;IAEjB,KAAKnC,aAAa;MAChB,OAAO;QAAE,GAAGY,KAAK;QAAEF,OAAO,EAAE,KAAK;QAAEF,OAAO,EAAEgB,MAAM,CAACK;MAAQ,CAAC;IAE9D,KAAK5B,aAAa;MAChB,OAAO;QAAE,GAAGW,KAAK;QAAEF,OAAO,EAAE,IAAI;QAAEF,OAAO,EAAE;MAAK,CAAC;IAEnD,KAAKN,WAAW;MACdG,KAAK,CAACI,KAAK,CAACe,MAAM,CAACK,OAAO,CAAC;MAC3B,OAAO;QAAE,GAAGjB,KAAK;QAAEF,OAAO,EAAE,KAAK;QAAED,KAAK,EAAEe,MAAM,CAACI,EAAE;QAAEpB,OAAO,EAAE;MAAK,CAAC;IAEtE,KAAKL,gBAAgB;MACnB,OAAO;QACL,GAAGS,KAAK;QACRL,IAAI,EAAEU,wBAAwB,CAAC,CAAC,IAAI;MACtC,CAAC;IAEH;MACE,OAAOL,KAAK;EAChB;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}